<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://kit.fontawesome.com/d83848f4f6.js"
      crossorigin="anonymous"
    ></script>
    <link href="asset/index.css" rel="stylesheet" />

    <title>Document</title>
  </head>
  <body>
    <div id="wrap">
      <div id="sidebar">
        <h1>
          <i class="fa-solid fa-plug-circle-plus" style="color: #4bad55"></i>
          gimtwinkle.github.io
        </h1>
        <ul class="oneDepth">
          <li>
            <div class="listTitle">
              <i class="fa-solid fa-folder" style="color: #42a5f5"></i>
              WorkHistory
            </div>
            <ul id="workHistoryList"></ul>
          </li>
          <li>
            <div class="listTitle">
              <i class="fa-solid fa-folder" style="color: #42a5f5"></i>
              PersonalProject
            </div>
            <ul id="PersonalProject"></ul>
          </li>
        </ul>
      </div>
      <div id="contents">
        <iframe src="" frameborder="0" id="iframeView"></iframe>
      </div>
    </div>
    <div id="myModal" class="modal">
      <div id="modalHeader" class="modal-header">ë“œë˜ê·¸í•´ì„œ ì´ë™ ê°€ëŠ¥</div>
      <div class="modal-content">
        <p id="description">ì—¬ê¸°ì— ì›í•˜ëŠ” ë‚´ìš©ì„ ë„£ìœ¼ì„¸ìš”</p>
        <button onclick="closeModal()">ë‹«ê¸°</button>
      </div>
    </div>
  </body>
  <script>
    const workHistoryList = [
      {
        fileType: "html5",
        iconColor: "#dc4a25",
        link: "portfolio2019/List2019.html",
        workName: "portfolio_2019-2020.html",
      },
      {
        fileType: "html5",
        iconColor: "#dc4a25",
        link: "portfolio2021/List2021.html",
        workName: "portfolio_2021-2023.html",
      },
    ];

    const PersonalProject = [
      {
        fileType: "js",
        iconColor: "#fed15b",
        link: "vanilajs/vanilaJS.html",
        workName: "Javascript_ChromeApp.js",
        desc: "ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ ìš”ì•½ (Tech Stack)\në°°í¬ (Deployment):\nâ†’ Vercelì„ ì‚¬ìš©í•˜ì—¬ GitHub ì—°ë™ ê¸°ë°˜ ìë™ ë°°í¬ êµ¬í˜„\nâ†’ ì»¤ë°‹ ì‹œ ìë™ìœ¼ë¡œ ë¹Œë“œ ë° ì‹¤ì‹œê°„ ë°˜ì˜\n\ní”„ë¡ íŠ¸ì—”ë“œ (Frontend):\nâ†’ React.jsì™€ Next.js ê¸°ë°˜ì˜ SPA(ì‹±ê¸€ í˜ì´ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜)\nâ†’ CSR ë° SSR í˜¼í•© êµ¬ì¡°ë¡œ ë¹ ë¥¸ ë¡œë”© ì„±ëŠ¥ ì œê³µ\nâ†’ Tailwind CSS ë˜ëŠ” Emotion ë“± ìŠ¤íƒ€ì¼ë§ ì‚¬ìš© (í•„ìš” ì‹œ ì¶”ê°€ ê°€ëŠ¥)\n\në°±ì—”ë“œ / DB (Backend / DB):\nâ†’ Firebase (NoSQL) ê¸°ë°˜ ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ í™œìš©\nâ†’ Firebase Hosting, Authentication, Firestore ë“± í†µí•© ì‚¬ìš© ê°€ëŠ¥",
      },
      {
        fileType: "react",
        iconColor: "#5ed3f3",
        link: "https://react-newwons.vercel.app/",
        workName: "React_Blog.tsx",
        desc: "javascript",
      },
      {
        fileType: "shape",
        iconColor: "#fff",
        link: "https://twinkle-three-js.vercel.app/",
        workName: " ThreeJS_3D.js",
        desc: "javascript",
      },
    ];

    const setSideList = (arry, area) => {
      const listWrapInner = arry
        .map(
          (item) =>
            `<li><a href="${item.link}"><i class="fa-brands fa-${item.fileType}" style="margin-right:5px;color:${item.iconColor}"></i>${item.workName}</a><a href="${item.link}" target="_blank">ìƒˆì°½</a></li>`
        )
        .join("");

      document.getElementById(area).innerHTML = listWrapInner;
    };

    setSideList(workHistoryList, "workHistoryList");
    setSideList(PersonalProject, "PersonalProject");

    const ids = ["#workHistoryList", "#PersonalProject"];

    let clickElementSrc;

    const showDescription = (text) => {
      const descriptionBox = document.getElementById("description");
      descriptionBox.innerHTML = text
        ? `<p>${text.replace(/\n/g, "<br>")}</p>`
        : "";
    };

    ids.forEach((selector) => {
      const el = document.querySelector(selector);
      el.addEventListener("click", function (event) {
        if (event.target.tagName.toLowerCase() === "a") {
          event.preventDefault();

          const href = event.target.getAttribute("href");
          const clickedText = event.target.textContent.trim();
          useSrcOutSide(href);

          if (selector === "#PersonalProject") {
            openModal();
            const matched = PersonalProject.find((item) =>
              clickedText.includes(item.workName.trim())
            );
            showDescription(matched?.desc || "");
          } else {
            showDescription("");
          }
        }
      });
    });

    const useSrcOutSide = (src) => {
      document.getElementById("iframeView").setAttribute("src", src);
    };

    function openModal() {
      document.getElementById("myModal").style.display = "block";
    }

    function closeModal() {
      document.getElementById("myModal").style.display = "none";
    }

    const modal = document.getElementById("myModal");
    const header = document.getElementById("modalHeader");

    let offsetX = 0,
      offsetY = 0,
      isDragging = false;

    header.addEventListener("mousedown", (e) => {
      isDragging = true;
      offsetX = e.clientX - modal.offsetLeft;
      offsetY = e.clientY - modal.offsetTop;
    });

    document.addEventListener("mousemove", (e) => {
      if (isDragging) {
        modal.style.left = `${e.clientX - offsetX}px`;
        modal.style.top = `${e.clientY - offsetY}px`;
      }
    });

    document.addEventListener("mouseup", () => {
      isDragging = false;
    });
  </script>
</html>
